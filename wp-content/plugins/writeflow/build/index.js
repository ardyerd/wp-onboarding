(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.plugins,n=window.wp.editor,o=window.wp.element,r=window.wp.components,i=window.wp.data,a=window.ReactJSXRuntime,l=({onNext:e})=>{const t=(0,i.useSelect)(e=>e("core/editor").getEditedPostAttribute("meta")),{editPost:n}=(0,i.useDispatch)("core/editor");return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.TextareaControl,{label:"Brainstorm your ideas:",value:t._writeflow_idea||"",onChange:e=>n({meta:{...t,_writeflow_idea:e}})}),(0,a.jsx)(r.Button,{variant:"primary",onClick:e,children:"Create Outline →"})]})},s=window.wp.apiFetch;var d=e.n(s);const c=({onNext:e,onBack:t})=>{const n=(0,i.useSelect)(e=>e("core/editor").getEditedPostAttribute("meta")),{editPost:l}=(0,i.useDispatch)("core/editor"),[s,c]=(0,o.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.TextareaControl,{label:"Create your outline: (use bullet points)",value:n._writeflow_outline||"",onChange:e=>l({meta:{...n,_writeflow_outline:e}})}),(0,a.jsx)(r.Button,{variant:"secondary",onClick:t,style:{marginRight:"8px"},children:"← Back to Ideas"}),(0,a.jsx)(r.Button,{variant:"secondary",onClick:async()=>{c(!0);const e=await d()({path:"/wp/v1/writeflow/generate-outline",method:"POST",data:{idea:n._writeflow_idea}});l({meta:{...n,_writeflow_outline:e.outline}}),c(!1)},disabled:s,style:{marginRight:"8px"},children:s?(0,a.jsx)(r.Spinner,{}):"[AI] Generate Outline"}),(0,a.jsx)(r.Button,{variant:"primary",onClick:e,children:"Start Drafting →"})]})},u=({onNext:e,onBack:t})=>{const n=(0,i.useSelect)(e=>e("core/editor").getEditedPostAttribute("meta")),{editPost:l}=(0,i.useDispatch)("core/editor"),{insertBlocks:s}=(0,i.useDispatch)("core/block-editor"),[c,u]=(0,o.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Notice,{status:"info",children:"Expand each outline point into 2–4 paragraphs. Focus on clarity, not perfection. AI will expand your outline into a structured article."}),(0,a.jsxs)("div",{style:{marginTop:"16px"},children:[(0,a.jsx)(r.Button,{variant:"secondary",onClick:t,style:{marginRight:"8px"},children:"← Back to Outline"}),(0,a.jsx)(r.Button,{variant:"secondary",onClick:async()=>{if(!n._writeflow_outline)return void alert("Please provide an outline before expanding the draft.");u(!0);const e=await d()({path:"/wp/v1/writeflow/expand-draft",method:"POST",data:{outline:n._writeflow_outline}}),t=wp.blocks.rawHandler({HTML:e.expanded_draft});s(t),u(!1)},disabled:c,style:{marginRight:"8px"},children:c?(0,a.jsx)(r.Spinner,{}):"[AI] Expand Draft"}),(0,a.jsx)(r.Button,{variant:"primary",onClick:e,children:"Proceed to Checklist →"})]})]})},w=({onBack:e})=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.CheckboxControl,{label:"Clear introduction?"}),(0,a.jsx)(r.CheckboxControl,{label:"One idea per section?"}),(0,a.jsx)(r.CheckboxControl,{label:"Short paragraphs?"}),(0,a.jsx)(r.CheckboxControl,{label:"Clear conclusion?"})]}),x=()=>{const[e,t]=(0,o.useState)(1);return(0,a.jsxs)("div",{style:{padding:"16px"},children:[(0,a.jsx)("h2",{children:"WriteFlow"}),1===e&&(0,a.jsx)(l,{onNext:()=>t(2)}),2===e&&(0,a.jsx)(c,{onNext:()=>t(3),onBack:()=>t(1)}),3===e&&(0,a.jsx)(u,{onNext:()=>t(4),onBack:()=>t(2)}),4===e&&(0,a.jsx)(w,{onBack:()=>t(3)})]})};(0,t.registerPlugin)("writeflow-sidebar",{render:()=>(0,a.jsx)(n.PluginSidebar,{name:"writeflow-sidebar",title:"WriteFlow",children:(0,a.jsx)(x,{})})})})();